# Checklist de D√©ploiement - Cosmetovigilance

## Avant le D√©ploiement

### Pr√©requis Syst√®me
- [ ] Java 17+ install√©
- [ ] Maven install√© (ou utiliser ./mvnw)
- [ ] Node.js 18+ install√©
- [ ] MySQL 8+ install√© et en cours d'ex√©cution
- [ ] Port 8080 disponible

### Configuration Base de Donn√©es
- [ ] Base de donn√©es 'cosmetovigilance' cr√©√©e
- [ ] Variables d'environnement configur√©es:
  - [ ] DB_URL (ou utiliser d√©faut)
  - [ ] DB_USERNAME
  - [ ] DB_PASSWORD

### Configuration JWT
- [ ] JWT_SECRET configur√© (en production)
- [ ] JWT_EXPIRATION configur√© (optionnel)

### Configuration CORS
- [ ] CORS_ORIGINS configur√© avec votre domaine (en production)

## Build Frontend

- [ ] `npm install` ex√©cut√©
- [ ] `npm run build` r√©ussi
- [ ] Dossier `dist/` cr√©√©
- [ ] `dist/index.html` existe
- [ ] `dist/assets/` existe avec fichiers JS/CSS

## Copie Frontend vers Backend

- [ ] Dossier `backend/src/main/resources/static/` cr√©√©
- [ ] Fichiers copi√©s: `cp -r dist/* backend/src/main/resources/static/`
- [ ] V√©rifier: `backend/src/main/resources/static/index.html` existe
- [ ] V√©rifier: `backend/src/main/resources/static/assets/` existe

## Build Backend

- [ ] `cd backend` effectu√©
- [ ] `./mvnw clean package` r√©ussi
- [ ] JAR cr√©√©: `target/cosmetovigilance-0.0.1-SNAPSHOT.jar`
- [ ] Pas d'erreurs de compilation
- [ ] Pas d'erreurs de tests (ou -DskipTests utilis√©)

## V√©rification des Fichiers

### Contr√¥leurs modifi√©s
- [ ] `AuthController.java` utilise `/api/auth`
- [ ] `DeclarationController.java` utilise `/api/declarations`
- [ ] `AttachmentController.java` utilise `/api/attachments`
- [ ] `SpaController.java` existe et g√®re les routes frontend

### Configuration
- [ ] `application-prod.properties` sans `context-path`
- [ ] `WebConfig.java` configure les ressources statiques
- [ ] `SecurityConfig.java` configure CORS et JWT

## Lancement

- [ ] Commande ex√©cut√©e: `java -jar target/cosmetovigilance-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod`
- [ ] Application d√©marre sans erreur
- [ ] Log indique: "Started CosmetovigilanceApplication"
- [ ] Log indique le port: "Tomcat started on port(s): 8080"

## Tests Post-D√©ploiement

### Frontend
- [ ] Page d'accueil accessible: `http://localhost:8080/`
- [ ] Page login accessible: `http://localhost:8080/login`
- [ ] Page dashboard accessible: `http://localhost:8080/dashboard`
- [ ] Page formulaire accessible: `http://localhost:8080/cosmetovigilance`
- [ ] Page d√©clarations accessible: `http://localhost:8080/declarations`

### Assets
- [ ] Fichiers CSS se chargent (v√©rifier DevTools)
- [ ] Fichiers JS se chargent (v√©rifier DevTools)
- [ ] Images se chargent
- [ ] Pas d'erreur 404 dans la console

### API
- [ ] Endpoint auth accessible: `curl http://localhost:8080/api/auth/...`
- [ ] Endpoint declarations accessible (avec JWT)
- [ ] Upload de fichiers fonctionne

### Authentification
- [ ] Login fonctionne
- [ ] JWT token est retourn√©
- [ ] Redirection apr√®s login fonctionne
- [ ] Pages prot√©g√©es n√©cessitent l'authentification

### Navigation
- [ ] React Router fonctionne (navigation sans rechargement)
- [ ] Rafra√Æchissement de page fonctionne (pas de 404)
- [ ] Bouton retour du navigateur fonctionne

## R√©solution des Probl√®mes

### Si 404 sur /
- [ ] V√©rifier que `backend/src/main/resources/static/index.html` existe
- [ ] Rebuilder le backend: `./mvnw clean package`
- [ ] V√©rifier que `application-prod.properties` n'a PAS de `context-path`

### Si 404 sur /login ou /dashboard
- [ ] V√©rifier que `SpaController.java` existe
- [ ] V√©rifier que les routes sont dans `@RequestMapping`
- [ ] Rebuilder le backend

### Si API ne r√©pond pas
- [ ] V√©rifier que contr√¥leurs utilisent `/api/*`
- [ ] V√©rifier CORS dans logs
- [ ] V√©rifier JWT token si endpoint prot√©g√©

### Si assets ne se chargent pas
- [ ] V√©rifier que `assets/` existe dans `static/`
- [ ] V√©rifier `WebConfig.java` configure `/assets/**`
- [ ] V√©rifier cache navigateur (F5 ou Ctrl+Shift+R)

## Nettoyage

Si besoin de rebuilder compl√®tement:
- [ ] Supprimer `backend/src/main/resources/static/*`
- [ ] Supprimer `backend/target/`
- [ ] Supprimer `dist/`
- [ ] Recommencer le processus

## Monitoring Post-D√©ploiement

- [ ] Logs backend v√©rifi√©s (pas d'erreurs)
- [ ] Logs MySQL v√©rifi√©s (connexion OK)
- [ ] Performance acceptable (temps de chargement < 3s)
- [ ] M√©moire JVM acceptable (< 512MB en idle)

## Documentation Mise √† Jour

- [ ] README.md lu et compris
- [ ] DEPLOYMENT.md consult√© si probl√®mes
- [ ] QUICK-START-PROD.md pour r√©f√©rence rapide
- [ ] ARCHITECTURE-PROD.md pour comprendre le syst√®me

## Validation Finale

- [ ] ‚úÖ Frontend accessible et fonctionnel
- [ ] ‚úÖ API r√©pond correctement
- [ ] ‚úÖ Authentification fonctionne
- [ ] ‚úÖ Base de donn√©es connect√©e
- [ ] ‚úÖ Pas d'erreurs dans les logs
- [ ] ‚úÖ Performance acceptable

üéâ D√©ploiement r√©ussi!
